<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="paimon.png" />
    <link rel="stylesheet" href="../style.css">
    </link>

    <title>Smart Kitchen</title>
    <script>
        var res
        window.onload = async function () {
            //res=await fetch("http://localhost:8080/smart_kitchen/servlet/dish")
            //console.log(result)
        }
        async function display() {
            fetch('http://localhost:8080/smart_kitchen/servlet/dish')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response failed');
                    }
                    return response.json(); // This parses the JSON data in the response body
                })
                .then(data => {
                    console.log(data); // You can now work with the JSON data here
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                });

        }
    </script>

</head>

<body>
    <nav>
        <ul class="nav_links">
            <a href="../index.html">Home</a>
            <a href="../Featured/Featured.html">Featured</a>
            <a href="../meals/meal.html">Sandwiches & meals</a>
            <a href="../Sides/Side.html">Sides</a>
            <a href="../pizza/p.html">Pizza</a>
            <a href="dd.html">Drinks</a>
        </ul>
    </nav>

    <div class="cards">
        <div class="image">
            <img src="coke.jpg" alt="Coke">
        </div>
        <div class="title">
            <h1>Coke</h1>
            <button class="add-button" data-name="Coke" data-price="2.00">+</button>
            <button class="remove-button" data-name="Coke" data-price="2.00">-</button>
        </div>
    </div>

    <div class="cards">
        <div class="image">
            <img src="hc.jpg" alt="Hot Chocolate">
        </div>
        <div class="title">
            <h1>Hot Chocolate</h1>
            <button class="add-button" data-name="Hot Chocolate" data-price="4.50">+</button>
            <button class="remove-button" data-name="Hot Chocolate" data-price="4.50">-</button>
        </div>
    </div>

    <div class="cards">
        <div class="image">
            <img src="l.jpg" alt="hotdog">
        </div>
        <div class="title">
            <h1>Latte</h1>
            <button class="add-button" data-name="Latte" data-price="2.50">+</button>
            <button class="remove-button" data-name="Latte" data-price="2.50">-</button>
        </div>
    </div>

    <div class="cards">
        <div class="image">
            <img src="spr.jpg" alt="Sprite">
        </div>
        <div class="title">
            <h1>Sprite</h1>
            <button class="add-button" data-name="Sprite" data-price="2.00">+</button>
            <button class="remove-button" data-name="Sprite" data-price="2.00">-</button>
        </div>
    </div>

    <div class="cards">
        <div class="image">
            <img src="tea.jpg" alt="tea">
        </div>
        <div class="title">
            <h1>Tea</h1>
            <button class="add-button" data-name="tea" data-price="2.00">+</button>
            <button class="remove-button" data-name="tea" data-price="2.00">-</button>
        </div>
    </div>

    <div class="cards">
        <div class="image">
            <img src="w.jpg" alt="water">
        </div>
        <div class="title">
            <h1>Water</h1>
            <button class="add-button" data-name="tea" data-price="1.50">+</button>
            <button class="remove-button" data-name="tea" data-price="1.50">-</button>
        </div>
    </div>
    <style>
        .checkout-page {
            display: none;
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
        }

        .checkout-button {
            display: block;
            margin-top: 10px;
        }
    </style>

    <div class="checkout-page" id="checkout-page" style="display: none;">
        <h2>Shopping Cart</h2>
        <ul id="cart-items"></ul>
        <p>Total Price: $<span id="total-price">0.00</span></p>
        <button id="checkout-button">Checkout</button>
    </div>

    <style>
        .shopping-cart-icon {
            position: fixed;
            bottom: 10px;
            right: 10px;
        }
    </style>

    <div class="shopping-cart-icon">
        <img src="cart-icon.png" alt="Cart" id="cart-icon" onclick="showCart()" style="width: 50px; height: 50px;">
    </div>

    <script>
        var cart = [];
        var totalPrice = 0.00;

        // Helper function to find an item in the cart by name
        function findCartItem(name) {
            return cart.find(item => item.name === name);
        }

        function addItemToCart(name, price) {
            var existingItem = findCartItem(name);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ name: name, price: price, quantity: 1 });
            }
            totalPrice += price;
            updateCart();
        }

        function removeItemFromCart(name, price) {
            var existingItem = findCartItem(name);
            if (existingItem) {
                existingItem.quantity--;
                if (existingItem.quantity === 0) {
                    // Remove the item completely from the cart
                    var index = cart.indexOf(existingItem);
                    cart.splice(index, 1);
                }
                totalPrice -= price;
                updateCart();
            }
        }

        function updateCart() {
            var cartItems = document.getElementById("cart-items");
            var total = document.getElementById("total-price");

            cartItems.innerHTML = "";
            cart.forEach(function (item) {
                var li = document.createElement("li");
                li.textContent = item.name + " x" + item.quantity;
                cartItems.appendChild(li);
            });

            total.textContent = totalPrice.toFixed(2);
        }

        function showCart() {
            var checkoutPage = document.getElementById("checkout-page");
            checkoutPage.style.display = "block";
        }

        var addButtons = document.querySelectorAll(".add-button");
        addButtons.forEach(function (button) {
            button.addEventListener("click", function () {
                var name = button.getAttribute("data-name");
                var price = parseFloat(button.getAttribute("data-price"));
                addItemToCart(name, price);
            });
        });

        var removeButtons = document.querySelectorAll(".remove-button");
        removeButtons.forEach(function (button) {
            button.addEventListener("click", function () {
                var name = button.getAttribute("data-name");
                var price = parseFloat(button.getAttribute("data-price"));
                removeItemFromCart(name, price);
            });
        });

        document.getElementById("checkout-button").addEventListener("click", function () {
            alert("Redirecting to the payment page. Total Price: $" + totalPrice.toFixed(2));
        });
    </script>
</body>


</html>